function urlMatch(e){var e=new RegExp("^"+e.replace(/\*/g,".*").replace(/\/+$/g,"").replace(/\?/g,"\\?").replace("//www.","//(www.)?")+"$"),t=window.location.protocol+"//"+window.location.hostname.replace(/^www./,"")+window.location.pathname,n=window.location.protocol+"//www."+window.location.hostname.replace(/^www./,"")+window.location.pathname,r=new URL(window.location.href),a=new URLSearchParams(r.search),a=(a.delete("test-preview"),a.delete("test-variant"),r.search=a.toString(),r.toString());return e.test(t)||e.test(t.replace(/\/+$/,""))||e.test(n)||e.test(n.replace(/\/+$/,""))||e.test(a.replace(/\/+$/,""))||e.test(a.replace("//www.","//").replace(/\/+$/,""))}function mdEvtAttr(e){for(;e;){if(e.hasAttribute&&e.hasAttribute("mida-event")&&!e.hasAttribute("mida-event-processed"))return e.getAttribute("mida-event");e=e.parentElement}return null}function processEvent(e){var n;window.submittedList=[];try{if((n=JSON.parse(e))&&n.length)for(let e=0;e<n.length;e++){let t=n[e];try{var r=document.querySelectorAll(t.path_name);for(let e=0;e<r.length;e++){var a=r[e];("https://"===t.url||"https://"===t.url||!t.url||urlMatch(t.url))&&(1===Number(t.action_type)?a.addEventListener("click",function(){mida.track(t.event_name)}):2===Number(t.action_type)&&a.addEventListener("keyup",function(){window.submittedList.includes(t.event_name)||(mida.track(t.event_name),window.submittedList.push(t.event_name))}))}}catch(e){console.error(e)}}}catch(e){console.error(e)}}function addMidaEventListener(e){const t=e.getAttribute("mida-event");t&&""!==t.trim()&&!e.hasAttribute("mida-event-processed")&&(e.addEventListener("click",function(){window.mida.track(t)}),e.setAttribute("mida-event-processed","true"))}function addMidaEventListeners(){document.querySelectorAll("[mida-event]:not([mida-event-processed])").forEach(addMidaEventListener)}const midaEventObserver=new MutationObserver(e=>{e.forEach(e=>{"childList"===e.type&&e.addedNodes.forEach(e=>{e.nodeType===Node.ELEMENT_NODE&&(e.hasAttribute("mida-event")&&addMidaEventListener(e),e.querySelectorAll("[mida-event]:not([mida-event-processed])").forEach(addMidaEventListener))})})});midaEventObserver.observe(document.body,{childList:!0,subtree:!0}),"loading"===document.readyState?document.addEventListener("DOMContentLoaded",addMidaEventListeners):addMidaEventListeners();