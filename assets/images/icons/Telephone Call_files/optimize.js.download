var win=window,doc=document,nav=navigator,mdFirst=!1,mdScripts=[],midaObs={},mdChange={},mdWaitEl={},_goalProfile={},_versionHistory=[],mdIsBot=!1,cacheVersion="1.0.94",nextJS=(win._executedTests=new Set,win.md_int_list={},win.mdq=win.mdq||[],document.querySelector("script[src*='_next/static/']")),nextLoaded=!1;function getTimestamp(){return+new Date}function isIOS(){return/iPad|iPhone|iPod/.test(nav.userAgent)&&!win.MSStream}function safeParse(e){try{return"string"==typeof e?JSON.parse(e):e}catch(e){return{}}}console.log("mida v"+cacheVersion),win.md_cdn||(win.md_cdn="https://cdn.mida.so"),void 0===win.md_cache&&nextJS&&(win.md_cache=!1),void 0===win.md_cache&&(win.md_cache=!0),win._h_key=findKeyAttribute("key")||win._h_key;var _midaUrlParam=new URLSearchParams(win.location.search),editorKey=_midaUrlParam.get("editor")||null,checkCookieBanner=findKeyAttribute("cookie"),ls=checkCookieBanner?sessionStorage:localStorage;win.mida={isLoaded:!1,backend_url:"https://api.mida.so",preview:{},uuid:(win._h_uuid,function(){return new Promise(e=>{const t=()=>{win._h_uuid?e(win._h_uuid):setTimeout(t,100)};t()})}),user_id:null,hasConsent:!checkCookieBanner,isRedirect:!1,userID:function(e){this.user_id=e},grantConsent:function(e){console.log("[Mida] grant consent",e),e?(this.hasConsent=!0,ls.setItem("mida_consent","yes"),win._abcache&&ls.setItem("_abcache",win._abcache),win.vaId&&ls.setItem("_variant_result",win.vaId),mida.setCookie("optimize_uuid",win._h_uuid),sendVariant()):ls.setItem("mida_consent","no")},rmfk:function(){var e=document.getElementById("abhide");e&&e.parentNode&&e.parentNode.removeChild(e)},execute:function(e){var t=ls.getItem("_abcache")||win._abcache;t&&e&&(win.midaTesting(t,Number(e)),setTimeout(()=>{"function"==typeof win.mpw&&win.mpw()},2e3))},version:function(e){return e?null!==(e=this.getVariant(e))&&0===Number(e)?"Control":e:(e=ls.getItem("_variant_result"))?(e=Object.entries(JSON.parse(e)).reduce((e,[t,i])=>(e[t]=i.vaId,e),{}),Object.entries(e).map(([e,t])=>({testId:e,variant:0===t?"Control":t}))):[]},getVariant:function(e){let t=null;var i=win.vaId||ls.getItem("_variant_result");return i?(i=(i=safeParse(i))&&i[Number(e)],t=i&&"vaId"in i?i.vaId:t):null},init:function(e){win._h_key=e},identify:function(e){return new Promise(function(t){e.hid=win._h_uuid,mida.fetch("/track/"+win._h_key,"POST",e,function(e){e=safeParse(e);win._h_uuid=e.id,win.mida.uuid=e.id,win._hid=e.id,mida.setCookie("optimize_uuid",e.id),t()})})},track:function(n,t={}){t.url_origin=win.location.origin,t.url_path=win.location.pathname;let a=getTimestamp();try{var e=JSON.parse(ls.getItem("md_pending_events")||"[]");e.push({event_text:n,event_property:t,session:win._h_session,widget_key:win._h_key,uuid:win._h_uuid,url:win.location.origin+win.location.pathname,href:win.location.href,timestamp:a}),ls.setItem("md_pending_events",JSON.stringify(e))}catch(e){console.error("Failed to save event to localStorage:",e)}return new Promise(function(i){var e={event_text:n,event_property:JSON.stringify(t),session:win._h_session,widget_key:win._h_key,uuid:win._h_uuid,url:win.location.origin+win.location.pathname,href:win.location.href};try{"Purchase"===n&&window._revenueGoals&&window._revenueGoals.length&&window._revenueGoals.forEach(e=>{e.goal_id&&(mida.track("goal_"+e.goal_id),mida.converted(e.test_key))})}catch(e){}setTimeout(()=>{var e=_goalProfile[n];e&&(e.timestamp=a,e.event_name=n,e.variant=null===e.variant?mida.getVariant(e.id):e.variant,executeIntegration(e))},100),mida.fetch("/event/addv3","POST",e,function(e){try{var t=JSON.parse(ls.getItem("md_pending_events")||"[]").filter(e=>e.event_text!==n||e.timestamp!==a);ls.setItem("md_pending_events",JSON.stringify(t))}catch(e){console.error("Failed to update pending events:",e)}i()})})},converted:function(e){return new Promise(function(t){mida.fetch("/abtest/convertedv3","POST",{key:e,uuid:win._h_uuid,k:win._h_key},function(e){t()})})},revenue:function(e){return new Promise(function(t){e.uuid=win._h_uuid,e.k=win._h_key,mida.fetch("/abtest/convertedv3","POST",e,function(e){t()})})},features:[],cachedFeatureFlag:function(){var e=ls.getItem("md_ff")||null;return e?(this.features=safeParse(e),this.features):[]},isFeatureEnabled:function(e){return this.features=this.cachedFeatureFlag(),this.features.includes(e)},onFeatureFlags:function(e){let t=this.cachedFeatureFlag().length;this.reloadFeatureFlags().then(()=>{t||e()}).catch(e=>console.error(e)),t&&e()},reloadFeatureFlags:function(){return new Promise((t,i)=>{mida.fetch("/feature-flag","POST",{uuid:win._h_uuid,k:win._h_key,user_id:this.user_id,lang:nav.language,url:win.location.href},e=>{try{this.features=JSON.parse(e),ls.setItem("md_ff",JSON.stringify(this.features)),t()}catch(e){i(e)}})})},setCookie:function(e,t,i=365,n="d"){var a=new Date,r=window.cookie_domain||doc.domain;mida.hasConsent?"h"===n?a.setHours(a.getHours()+i):"m"===n?a.setMinutes(a.getMinutes()+i):"s"===n?a.setSeconds(a.getSeconds()+i):a.setDate(a.getDate()+i):a.setMinutes(a.getMinutes()+1),doc.cookie=e+"="+t+";expires="+a.toString()+";domain="+r+";path=/;"},getCookie:function(e){e=doc.cookie.match("(^|;)\\s*"+e+"\\s*=\\s*([^;]+)");return e?e.pop():""},fetch(e,a,r,s,o=!1){const c=(t=0)=>{const i=new XMLHttpRequest;i.open(a,""+this.backend_url+e,!0),i.setRequestHeader("Content-Type",o?"text/plain":"application/json;charset=UTF-8");let n=!1;i.onreadystatechange=function(){if((this.readyState===i.LOADING||this.readyState===i.DONE)&&200===this.status&&!n)try{if(i.responseText&&0<i.responseText.length){var e=i.responseText;if(e.startsWith("{")||e.startsWith("["))try{JSON.parse(e)}catch(e){return}n=!0,s(e)}}catch(e){}this.readyState===i.DONE&&(200!==this.status?t<1&&c(t+1):n||s(i.responseText))},i.send(JSON.stringify(r))};c()}},win.md_api&&(mida.backend_url=win.md_api);let _previewId=_midaUrlParam.get("test-preview")||sessionStorage.getItem("preview-id"),_previewVariant=(_previewId&&(mida.preview.id=_previewId,sessionStorage.setItem("preview-id",_previewId)),_midaUrlParam.get("test-variant")||sessionStorage.getItem("preview-variant"));function processEvent(){}function executeIntegration(){}function showToast(){}function queryElement(e){return new Promise(t=>{try{const i=e.replace(/\.+(\s|$|:|>)/g,"$1").replace(/\.\./g,".").replace(/(?:^|\s)\.(?=\s|$)/g,"").trim();setTimeout(()=>{try{var e=doc.querySelector(i);t(e)}catch(e){console.warn("[mida] Error querying element:",e),t(null)}})}catch(e){t(null)}})}_previewVariant&&(mida.preview.variant=_previewVariant,sessionStorage.setItem("preview-variant",_previewVariant)),mida.hasConsent||(mida.hasConsent="yes"===(ls.getItem("mida_consent")||"no")),_readParam("verify")===win._h_key&&mida.fetch("/widget/active/"+win._h_key,"GET",{},()=>{}),win.midaTesting=async(e,h=null)=>{win.applyStart=getTimestamp();var w,_,t=safeParse(e);if(h&&(_versionHistory=[],win._executedTests.clear()),e&&t)for(let e=0;e<t.length;e++){let u=t[e],m=u.test_id;var f,v=u.test_name,p=u.trigger_variant_change;if(!(win._executedTests.has(m)||h&&h!==m||!h&&"donotstart"===p)&&((!mida.preview.id||(_mdLoad("/js/mida-preview.js?v="+cacheVersion),Number(m)===Number(mida.preview.id)))&&u)){try{"{}"!==u.integration&&(f=safeParse(u.integration),win.md_int_list[m]=f)}catch(e){}let s=!1,n,a=(n=safeParse(u.data),[]);try{Object.keys(n).forEach(function(e){var t,i=n[e];for(let e=0;e<i.length;e++)i[e].data.length&&(t=i[e].data[0])&&t.url&&a.push(t.url)})}catch(e){console.error(e)}let e=win.location,t=e.protocol+"//"+_removeWww(e.hostname)+e.pathname,i=e.protocol+"//www."+_removeWww(e.hostname)+e.pathname,r=new URL(window.location.href),o=new URLSearchParams(r.search),c=(o.delete("test-preview"),o.delete("test-variant"),r.search=o.toString(),r.toString()),d=!1;var g=safeParse(u.data);let l=[t,_removeTrail(t),i,_removeTrail(i),_removeTrail(c),_removeWww(c)];if(d=Object.keys(g).find(t=>l.some(e=>{return new RegExp("^"+t.replace(/\*/g,".*").replace(/\?/g,"\\?").replace(/\/+$/g,"").replace("//www.","//(www.)?")+"$","i").test(e.toLowerCase())})),!h&&"direct"!==p&&"URLChange"===p){let e="";midaObs[m]||(midaObs[m]=new MutationObserver(function(){location.href!==e&&(e=location.href,setTimeout(mida.execute(m),200))}),midaObs[m].observe(doc,H={subtree:!0,childList:!0}))}if(d=u.test_url_rule&&!urlRuleMatch(u.test_url_rule,e.href)?!1:d)if(win.abdata=g[d],h||"direct"===p){var g=!u.is_ab,y=null;let e=null,t=null,i=null,n=mida.getVariant(u.test_id);mida.preview.variant&&(n=mida.preview.variant.replace(/_/," "));var b=!0===u.is_aa,T=(null!==n&&!g||(u.result=safeParse(u.result),getExperimentRoute(u,g)),mida.getVariant(u.test_id));if(!mida.preview.variant&&0!==mida.preview.variant||(T=mida.preview.variant.toString().replace(/_/," ")),b)_goalProfile["goal_"+u.goal_id]={id:m,name:v,variant:T},"event"===u.goal_type&&(_goalProfile[u.goal_value]={id:m,name:v,variant:T}),win._executedTests.add(m);else{if(T&&(g=win.abdata.filter(e=>e.name===T)).length&&(y=(b=g[0]).data,e=b.customCSS||null,t=b.customJS||null),0===Number(T)){g=u.control_attr&&u.control_attr.js,b=u.control_attr&&u.control_attr.css;if(b&&insertCustomElement(b,"cocss","css"),g){let e="cjs_"+m;insertCustomElement(`function ${e}() { ${g} }`,e),setTimeout(()=>{try{window[e+"x"]||window[e](),window[e+"x"]=!0}catch(e){console.error("Error executing control JS:",e)}},20)}}if(_goalProfile["goal_"+u.goal_id]={id:m,name:v,variant:T},"event"===u.goal_type&&(_goalProfile[u.goal_value]={id:m,name:v,variant:T}),e&&insertCustomElement(e,"mcss_"+m,"css"),u.custom_css&&insertCustomElement(u.custom_css,"mccss_"+m,"css"),y){function S(e,t,i){var[n,a]=e.split("?"),[r,s]=t.split("?"),o=n.split("/"),c=r.split("/");let d=-1;var l,u=[];function m(e,t){return t&&(t=t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),t=new RegExp(t.replace("\\*","(.+)")),e=e.match(t))&&e[1]?e[1]:""}if((r=(n=i).indexOf("*"))===n.lastIndexOf("*")&&-1!==r)return n=m(_removeWww(e),_removeWww(i)),t.replace("*",n);for(let e=0;e<c.length;e++)c[e].includes("*")?(d=-1!==o.indexOf(c[e-1])?o.indexOf(c[e-1])+1:o.length-1,l=m(o[d],c[e]),u.push(c[e].replace("*",l)),o.splice(d,1)):u.push(c[e]);c.includes("*")&&-1!==d&&(r=o.slice(d),u.push(...r));let h=u.join("/"),w="";return a&&s&&(w=m(a,s)),s&&(h+="?"+s.replace("*",w)),h}function E(t){return new Promise(e=>setTimeout(e,t))}for(let r=0;r<y.length;r++){let a=y[r];var I,P,k=a.url;try{var x,L,O,C,M=new win.URL(k),N=win.location.href,j=S(N,k,d),R=S(N,k,k);!(k.includes("*")&&_removeWww(j)!==_removeWww(N)&&_removeWww(R)!==_removeWww(N)||!k.includes("*")&&(_removeWww(win.location.hostname)!==_removeWww(M.hostname)||win.location.pathname!==M.pathname||M.search&&!win.location.search.includes(M.search)||M.hash&&win.location.hash!==M.hash))||(i=k.includes("*")&&k!=N?j:k,x=document.head.innerHTML.includes("previewBarInjector"),L=i.includes("preview_theme_id="),x&&L)||(mida.isRedirect||(O=new URL(N).hostname,C=new URL(i).hostname,!isIOS()&&O===C||await sendVariant(),mida.setCookie("mida_redirect","true",30,"s"),win.location.href=a.relay_param?function(e,t){var i,n,[e,t]=[new URL(e),new URL(t)],[a,r]=[e.searchParams,t.searchParams];for([i,n]of a)r.has(i)||r.set(i,n);return e.hash&&(t.hash=e.hash),t.toString()}(N,i):i),mida.isRedirect=!0)}catch(e){}try{let n=r+JSON.stringify(a);!_versionHistory.includes(n)&&"rm"in a?(await queryElement(a.rm).then(e=>{e&&(e.parentNode.removeChild(e),_versionHistory.push(n),s=!0)}),await E(10)):!_versionHistory.includes(n)&&a.dir&&a.oriEl&&a.refEl?(I=await queryElement(a.oriEl),P=await queryElement(a.refEl),mida.preview.variant&&I&&I instanceof HTMLElement&&I.classList.add("abhighlight"),I&&P&&"a"===a.dir&&(w=I,(_=P)&&w&&_.nextSibling&&_.parentNode.insertBefore(w,_.nextSibling),_versionHistory.push(n),s=!0),I&&P&&"b"===a.dir&&(P.parentNode.insertBefore(I,P),_versionHistory.push(n),s=!0),await E(10)):!_versionHistory.includes(n)&&a.dir&&a.refEl&&"htmlBlock"in a?(await queryElement(a.refEl).then(e=>{e&&(e.insertAdjacentHTML("a"===a.dir?"afterend":"b"===a.dir?"beforebegin":"p"===a.dir?"afterbegin":"",a.htmlBlock),_versionHistory.push(n),s=!0)}),await E(10)):a.target&&await queryElement(a.target).then(t=>{if(t&&t instanceof HTMLElement){let e=["textContent","innerText","innerHTML","src","href"],i=["style","class"];e.forEach(e=>{e in a&&(t[e]=a[e])}),i.forEach(e=>{e in a&&t.setAttribute(e,a[e])}),!_versionHistory.includes(n)&&"outerHTML"in a&&(t.outerHTML=a.outerHTML,_versionHistory.push(n),s=!0),mida.preview.variant&&t.classList.add("abhighlight"),r===y.length-1&&setTimeout(()=>{const t=doc.querySelector(a.target);t&&t instanceof HTMLElement&&(e.forEach(e=>{e in a&&t[e]!==a[e]&&(t[e]=a[e])}),i.forEach(e=>{e in a&&t.getAttribute(e)!==a[e]&&t.setAttribute(e,a[e])}))},100)}})}catch(e){console.error(e)}}}if(t){let e="mjs_"+m;insertCustomElement(`function ${e}() { ${t} }`,e),setTimeout(()=>{try{window[e+"x"]||window[e](),window[e+"x"]=!0}catch(e){}},20)}if(u.custom_js){let e="mcjs_"+m;insertCustomElement(`function ${e}() { ${u.custom_js} }`,e),setTimeout(()=>{try{window[e+"x"]||window[e](),window[e+"x"]=!0}catch(e){}},20)}s&&win._executedTests.add(m)}}else{if(("DOMChange"===p||"specificDOMChange"===p)&&!mida.preview.variant){var H,b=doc.documentElement;try{"specificDOMChange"===p&&u.dom_change_path&&(b=doc.querySelector(u.dom_change_path));let e=null;midaObs[m]||(mdChange[m]=!0,setTimeout(()=>{mdChange[m]=!1},500),midaObs[m]=new MutationObserver(function(){mdChange[m]||(mdChange[m]=!0,clearTimeout(e),e=setTimeout(()=>{mida.execute(m),setTimeout(()=>{mdChange[m]=!1},500)},500))}),H={attributes:!0,childList:!0,characterData:!0},midaObs[m].observe(b||doc.documentElement,H))}catch(e){console.error(e)}}mdWaitEl[m]&&clearInterval(mdWaitEl[m]),"waitFor"===p&&(mdWaitEl[m]=setInterval(()=>{doc.querySelector(u.dom_change_path)&&(mida.execute(m),clearInterval(mdWaitEl[m]))},10))}else mida.getCookie("mida_redirect")||setTimeout(()=>{showToast("Preview Err: the current setup targeting URL and the current URL do not match.")},3e3)}}setTimeout(()=>{mida.isLoaded=!0,mida.isRedirect||mida.rmfk()},100)};let getExperimentRoute=async(t,i=!1)=>{t.distribution;let e=[];win.abdata.length&&(e=win.abdata.map(e=>e.name));var n=pctDis(Number(t.traffic_allocation));let a;if(n){i?e.length&&(a=e[0]):a=null!==t.variation?t.variation:(e.push("-1"),0===Number(t.last_variant)&&(t.last_variant="-1"),(e=e.filter(e=>e!==t.last_variant))[Math.floor(Math.random()*e.length)]);n=win.abdata.filter(e=>e.name===a),n=n.length?n[0].name:0;try{let e={};var r=ls.getItem("_variant_result");(e=r?safeParse(r):e)[t.test_id]||i||(e[t.test_id]={vaId:n,uuid:win._h_uuid,complete:0}),i&&(e[t.test_id]={vaId:n,uuid:win._h_uuid,complete:0,personalize:1}),e[t.test_id]&&t.complete&&(e[t.test_id].complete=t.complete),win.vaId=JSON.stringify(e),mida.preview.id||ls.setItem("_variant_result",win.vaId)}catch(e){console.error(e)}}};function midaInit(){genSess().then(()=>{if(mdFirst||startMida(),!0===win.isSPA){let t=location.href;const e=history.pushState,a=history.replaceState;function i(){location.href!==t&&(_versionHistory=[],win._executedTests.clear(),startMida(),t=location.href)}history.pushState=function(){e.apply(this,arguments),i()},history.replaceState=function(){a.apply(this,arguments),i()},window.addEventListener("popstate",function(){i()}),document.addEventListener("click",function(e){setTimeout(()=>{location.href!==t&&i()},50)},!0)}if(!window.otag){if(win.mdq&&win.mdq.length)for(let e=0;e<win.mdq.length;e++)processMidaLayer(win.mdq[e]);win.mdq.pushToList=function(){try{for(let e=0;e<arguments.length;e++){var t=arguments[e];Array.prototype.push.call(this,t),processMidaLayer(t)}}catch(e){console.error("Error processing event:",e)}return this.length},win.mdq.push=win.mdq.pushToList,processPendingEvents()}let n={};_midaUrlParam.forEach(function(e,t){(t.startsWith("mida_")||t.startsWith("utm_")||"ref"===t||"referral"===t||"referrer"===t)&&e&&(n[t]=e)}),0<Object.keys(n).length&&mida.identify(n),_mdLoad("/js/mida-integration.js?v="+cacheVersion)}).catch(e=>{console.error(e)})}function _removeWww(e){return _removeTrail(e.toString().replace(/\/\/www\./g,"//").replace(/^(www\.)?/,""))}function _removeTrail(e){return e.toString().replace(/\/+$/,"")}function _noProtocol(e){return e.replace(/(^\w+:|^)\/\//,"")}function scrollPerc(e){var t=e.parentNode;return(e.scrollTop||t.scrollTop)/(t.scrollHeight-t.clientHeight)*100}function cleanSel(e){return e.replace(/\#[0-9]/,function(e){return e.replace("#","#\\3")}).replace(/\.[0-9]/,function(e){return e.replace(".",".\\3")})}function pctDis(e=100){return(()=>{var e=BigInt("0x"+win._h_uuid);let t=Number(e%BigInt(Number.MAX_SAFE_INTEGER));var e=Math.random,i=(Math.random=function(){var e=1e4*Math.sin(t++);return e-Math.floor(e)},Math.floor(100*Math.random()+1));return Math.random=e,i})()<e}function execReady(e,t,i){var n=()=>e(t,i);"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()}function _mdLoad(t){if(!mdScripts.includes(t)){let e=doc.createElement("script");e.type="text/javascript",e.src=""+win.md_cdn+t,e.async=!0,e.crossorigin="anonymous",doc.body?doc.body.appendChild(e):doc.addEventListener("DOMContentLoaded",()=>{doc.body.appendChild(e)}),mdScripts.push(t)}}function processMidaLayer(e){var t=e[0],e=Array.prototype.slice.call(e,1);"function"==typeof mida[t]&&mida[t].apply(mida,e)}function findKeyAttribute(t){var i=doc.getElementsByTagName("script");let n=null;for(let e=0;e<i.length;e++){var a=i[e];if(a.src){let e=null;try{e=new win.URL(a.src)}catch(e){}if(e&&e.hostname===_noProtocol(win.md_cdn)){if(e.searchParams.has(t))return e.searchParams.get(t);if(a.getAttribute(t))return a.getAttribute(t)}else e&&e.searchParams.has(t)?n=e.searchParams.get(t):a.getAttribute(t)&&(n=a.getAttribute(t))}}return n||!1}function genSess(){return new Promise(async(t,e)=>{win.ga_device_id=mida.getCookie("_ga"),win.ga_uuid=win.ga_device_id.split(".").slice(2).join(".");var i=mida.getCookie("optimize_uuid")||win._h_uuid;i&&"undefined"!==i?(win._h_uuid=i,t()):(mdFirst=!0,mida.fetch("/init/uuid","POST",{key:win._h_key,ua:nav.userAgent,lang:nav.language,platform:nav.platform,height:win.screen.height,width:win.screen.width,color:win.screen.colorDepth,tz:Intl.DateTimeFormat().resolvedOptions().timeZone,r:doc.referrer,h:win.location.host,l:win.location.href,user_id:mida.user_id,gid:win.ga_uuid},e=>{e=safeParse(e);mida.setCookie("optimize_uuid",e.uuid),win._h_uuid=e.uuid,win._h_session=e.session,applyTest(e.setting,e.global),t()},!0))})}function urlRuleMatch(e,t){if(!e||!t)return!1;var i,n,e=JSON.parse(e);if(!e.length)return!1;function a(e,t,i){t=t.trim();let n=null;try{n=new RegExp(t)}catch(e){}function a(e){e.trim().startsWith("http")||(e="https://"+e);e=new URL(e);return(e.hostname+e.pathname).replace(/^www\./,"")}return"simple"===e?a(t)===a(i):"exact"===e?t===i:"regex"===e?n&&n.test(i):"contain"===e&&i.includes(t)}for(i of e)if(!i.allowed&&a(i.rule,i.url,t))return!1;let r=!1;for(n of e)if(n.allowed){if(a(n.rule,n.url,t))return!0;r=!0}return!r}function sendVariant(){return new Promise((t,e)=>{try{var i;mida.hasConsent?((i=ls.getItem("_variant_result"))&&(win.vaId=i),mida.fetch("/abtest/visitor","POST",{uuid:win._h_uuid,key:win._h_key,variation:win.vaId,bot:mdIsBot},()=>{t()})):t()}catch(e){t()}})}function applyTest(t,e=!1){if(mida.preview.id||ls.setItem("_abcache",t),win._abcache=t,e&&e.js&&(insertCustomElement(`function mgjs() { ${e.js} }`,"mgjs"),setTimeout(()=>{try{mgjs()}catch(e){}},20)),e&&e.css&&insertCustomElement(e.css,"mgcss","css"),!e)try{let e=JSON.parse(t);e=e.filter(e=>0!==Number(e.cache)),t=JSON.stringify(e)}catch(e){}"[]"!==t?nextJS&&!win.md_cache?(win.midaTesting(t),win.md_cache=!0):win.midaTesting(t):setTimeout(()=>mida.rmfk(),50),setTimeout(()=>{win.mfunc&&Array.isArray(win.mfunc)&&(win.mfunc.forEach(e=>{try{e()}catch(e){}}),win.mfunc=[]),sendVariant()},200)}function queryDB(){var e=mida.preview.id;mida.fetch("/test/setting2","POST",{k:win._h_key,h:win.location.host,url:win.location.href,lang:nav.language,r:doc.referrer,uuid:win._h_uuid,user_id:mida.user_id,gid:win.ga_uuid,preview:e},e=>{e=safeParse(e);win._h_session=e.session,applyTest(e.setting,e.global)},!0)}function _readParam(e){return new win.URL(win.location.href).searchParams.get(e)||""}function insertCustomElement(e,t,i="javascript"){var n;doc.getElementById(t)||((n=doc.createElement("css"===i?"style":"script")).setAttribute("id",t),n.setAttribute("type","text/"+i),t=doc.createTextNode(e),n.appendChild(t),doc.body.appendChild(n))}function startMida(){var e=ls.getItem("_abcache");win.md_cache&&!mida.preview.id&&e&&execReady(applyTest,e),e&&ls.removeItem("_abcache"),queryDB()}var triggered=!1;function handleUserActivity(){triggered||(_mdLoad("/js/mida-event.js?v="+cacheVersion),_mdLoad("/js/mida-goal.js?v="+cacheVersion),setTimeout(()=>{mida.fetch("/widget/event/"+window._h_key,"GET",null,processEvent)},250),triggered=!0)}function processPendingEvents(){try{var e=JSON.parse(ls.getItem("md_pending_events")||"[]");e.length&&(ls.setItem("md_pending_events","[]"),e.forEach(e=>{console.log(e.event_text,e.event_property),mida.track(e.event_text,e.event_property)}))}catch(e){console.error("Failed to process pending events:",e)}}if(doc.addEventListener("mousemove",handleUserActivity),setTimeout(handleUserActivity,1e3),win.opener||editorKey){!win.opener&&editorKey&&execReady(_mdLoad,"/js/live-editor.js?v="+getTimestamp());const e2="addEventListener"in win,f2=e2?"addEventListener":"attachEvent",g2=e2?"message":"onmessage";if(win[f2](g2,e=>{var{event_id:e,previewId:t,previewVariant:i}=e.data;"5959"===e?execReady(_mdLoad,"/js/live-editor.js?v="+getTimestamp()):"5960"===e&&Object.assign(mida.preview,{id:t,variant:i})},!1),win.opener)try{win.opener.postMessage({event_id:"5555",data:{status:"load-editor"}},"*")}catch(e){console.error(e)}}if(nextJS){let e,t=new MutationObserver(()=>{clearTimeout(e),e=setTimeout(()=>{t.disconnect(),nextLoaded=!0,midaInit()},200)});t.observe(document.body,{childList:!0,subtree:!0}),setTimeout(()=>{nextLoaded||(t.disconnect(),midaInit())},1e3)}else midaInit();